function calcToday(){var now=new Date;return now.toLocaleDateString()+" "+now.toLocaleTimeString()}function initToday(){jQuery("#datetimepicker").datetimepicker({format:"d.m.Y H:i"}),console.info("DateTime init....")}function initTank_top(){console.log("InitTank_top...."),draw_tank_top=SVG("tank_top").size(300,200),x1=50,y1=0,h=180,l=200,l_skos=20,otstup=20,h_vistup=20}function showViewTank_top(){kontur=[[x1,y1],[x1+l/2,y1],[x1+l/2+otstup,y1+otstup],[x1+l/2+2*otstup,y1+otstup],[x1+l/2+2*otstup,y1+otstup/2],[x1+l/2+3*otstup,y1+otstup/2],[x1+l/2+3*otstup,y1+otstup],[x1+l/2+4*otstup,y1+otstup],[x1+l/2+4*otstup,y1+h],[x1-otstup,y1+h],[x1-otstup,y1+otstup],[x1,y1]],tank_top=draw_tank_top.polyline([kontur]).fill("none").stroke({width:4})}function showFillTank_top(ps){console.log("showFillTank_top "+ps);var ps_padding=h/100*ps,fill_x1=x1-otstup+4,fill_y1=y1+otstup+1+(h-ps_padding),fill_width=l-8,fill_h=ps_padding-otstup-1;tank_top_fill=draw_tank_top.rect(fill_width,fill_h).fill("green").move(fill_x1,fill_y1),console.log("tank_top_fill="+tank_top_fill),draw_tank_top.text(ps.toString()+" %").move(x1+l/6,y1+2)}function initTank(){draw_tank=SVG("tank").size(300,300),tank_width=160,tank_h=200}function showViewTank(){tank_x1=0,tank_y1=0,draw_tank.rect(tank_width/2,tank_h/6).fill("none").stroke({width:4}).move(tank_x1+tank_width/4,tank_y1),draw_tank.rect(tank_width,tank_h).fill("none").radius(10).stroke({width:4}).move(tank_x1,tank_y1+tank_h/6)}function showFillTank(ps){console.log("showFillTank "+ps);var gorlovina_h=tank_h/6,ps_padding=tank_h/100*ps,fill_x1=tank_x1+4,fill_y1=tank_y1+gorlovina_h+(tank_h-ps_padding)+1,fill_width=tank_width-8,fill_h=tank_y1+ps_padding-2;tank_fill=draw_tank.rect(fill_width,fill_h).fill("green").move(fill_x1,fill_y1),draw_tank.text(ps.toString()+" %").move(tank_x1+tank_width/2.5,y1+tank_h/2)}$(function(){initTank_top(),showViewTank_top(),showFillTank_top(40),initTank(),showViewTank(),showFillTank(50),app=new Vue({el:"#app",data:{menu:[{label:"Main",isActive:!0},{label:"Current state",isActive:!1},{label:"Statistics",isActive:!1},{label:"Setup",isActive:!1}],menuActiveIndex:0,power_str:"OFF",generator_name:"Mountain Cabin",today:calcToday(),isControlActive:!1,motor_state:0,motor_state_str:"OFF",message:"Mountaine Cabine",tank_fuel_ps:100,tank_top_fuel_ps:100,engine_params:[["Current Load",.3,"kW"],["System Temperature",38,"C°"],["Engine Temperature",85,"C°"],["Next Maintenance",28,"day"]],fuel_params:[["Total kW*h consumed",.5,"kW"],["Total fuel consumed",18,"liter"],["Average kW*h per day",.5,"kW"],["Average fuel per day",1.8,"liter"]]},methods:{menuActive:function(index){this.menuActiveIndex=index;for(var i=0;i<this.menu.length;i++)this.menu[i].isActive=i==index;2==index&&initCharts(),3==index&&initToday(),console.log(index)},btnFillTank_top:function(){alert(this.tank_top_fuel_ps),showFillTank_top(this.tank_top_fuel_ps)},btnFillRemove:function(){$("#"+tank_top_fill.attr("id")).remove()},btnMotorClick:function(){0==this.motor_state?(this.motor_state=1,this.motor_state_str="ON"):(this.motor_state=0,this.motor_state_str="OFF")},setPower:function(){"OFF"==this.power_str?this.power_str="ON":this.power_str="OFF",console.log("Power is:"+this.power_str)},saveControls:function(){alert("saved")}}})});